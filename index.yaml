id: github.com/cloud-native-toolkit/terraform-portworx
name: "ibm-portworx"
type: terraform
description: "Terraform module to install Portworx storage in an OpenShift cluster."
tags:
  - tools
  - devops
versions:
  - platforms:
      - ocp4
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: cluster
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc.git
            version: ">= 1.10.2"
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
    variables:
      - name: cluster_name
        moduleRef:
          id: cluster
          output: name
        type: string
        description: The name of the cluster
        default: ""
        optional: true
      - name: workers
        moduleRef:
          id: cluster
          output: workers
        type: list
        description: Number of worker nodes
      - name: worker_count
        moduleRef:
          id: cluster
          output: total_worker_count
        type: number
        description: Number of worker nodes
      - name: resource_group_name
        moduleRef:
          id: resource_group
          output: name
        type: string
        description: 'Resource Group in your account. List all available resource groups with: ibmcloud resource groups'
      - name: name_prefix
        scope: global
        type: string
        description: The prefix name for the service. If not provided it will default to the resource group name
        default: ""
        optional: true
      - name: region
        scope: global
        type: string
        description: 'The region Portworx will be installed in: us-south, us-east, eu-gb, eu-de, jp-tok, au-syd, etc..'
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: Get the ibmcloud api key from https://cloud.ibm.com/iam/apikeys
      - name: provision
        type: string
        description: If set to true installs Portworx on the given cluster
        default: "true"
        optional: true
      - name: storage_capacity
        type: number
        description: Storage capacity in GBs
        default: 200
        optional: true
      - name: storage_iops
        type: number
        description: This is used only if a user provides a custom storage_profile
        default: 10
        optional: true
      - name: storage_profile
        type: string
        description: The is the storage profile used for creating storage
        default: 10iops-tier
        optional: true
      - name: create_external_etcd
        type: bool
        description: Do you want to create an external_etcd? `True` or `False`
        default: false
        optional: true
      - name: etcd_members_cpu_allocation_count
        type: number
        default: 9
        optional: true
      - name: etcd_members_disk_allocation_mb
        type: number
        default: 393216
        optional: true
      - name: etcd_members_memory_allocation_mb
        type: number
        default: 24576
        optional: true
      - name: etcd_plan
        type: string
        default: standard
        optional: true
      - name: etcd_version
        type: string
        default: "3.3"
        optional: true
      - name: etcd_service_endpoints
        type: string
        default: private
        optional: true
      - name: etcd_username
        type: string
        description: 'etcd_username: You may override for additional security.'
        default: portworxuser
        optional: true
      - name: etcd_password
        type: string
        description: 'etcd_password: You may override for additional security.'
        default: etcdpassword123
        optional: true
      - name: etcd_secret_name
        type: string
        description: 'etcd_secret_name: This should not be changed unless you know what you''re doing.'
    version: v1.0.4
  - platforms:
      - ocp4
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: cluster
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc.git
            version: ">= 1.10.2"
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
    variables:
      - name: cluster_name
        moduleRef:
          id: cluster
          output: name
        type: string
        description: The name of the cluster
        default: ""
        optional: true
      - name: workers
        moduleRef:
          id: cluster
          output: workers
        type: list
        description: Number of worker nodes
      - name: worker_count
        moduleRef:
          id: cluster
          output: total_worker_count
        type: number
        description: Number of worker nodes
      - name: resource_group_name
        moduleRef:
          id: resource_group
          output: name
        type: string
        description: 'Resource Group in your account. List all available resource groups with: ibmcloud resource groups'
      - name: name_prefix
        scope: global
        type: string
        description: The prefix name for the service. If not provided it will default to the resource group name
        default: ""
        optional: true
      - name: region
        scope: global
        type: string
        description: 'The region Portworx will be installed in: us-south, us-east, eu-gb, eu-de, jp-tok, au-syd, etc..'
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: Get the ibmcloud api key from https://cloud.ibm.com/iam/apikeys
      - name: provision
        type: string
        description: If set to true installs Portworx on the given cluster
        default: "true"
        optional: true
      - name: install_storage
        type: string
        description: If set to false does not install storage and attach the volumes to the worker nodes. Enabled by default
        default: "true"
        optional: true
      - name: storage_capacity
        type: number
        description: Storage capacity in GBs
        default: 200
        optional: true
      - name: storage_iops
        type: number
        description: This is used only if a user provides a custom storage_profile
        default: 10
        optional: true
      - name: storage_profile
        type: string
        description: The is the storage profile used for creating storage
        default: 10iops-tier
        optional: true
      - name: create_external_etcd
        type: bool
        description: Do you want to create an external_etcd? `True` or `False`
        default: false
        optional: true
      - name: etcd_members_cpu_allocation_count
        type: number
        default: 9
        optional: true
      - name: etcd_members_disk_allocation_mb
        type: number
        default: 393216
        optional: true
      - name: etcd_members_memory_allocation_mb
        type: number
        default: 24576
        optional: true
      - name: etcd_plan
        type: string
        default: standard
        optional: true
      - name: etcd_version
        type: string
        default: "3.3"
        optional: true
      - name: etcd_service_endpoints
        type: string
        default: private
        optional: true
      - name: etcd_username
        type: string
        default: portworxuser
        optional: true
      - name: etcd_password
        type: string
        default: etcdpassword123
        optional: true
      - name: etcd_secret_name
        type: string
    version: v1.0.3
  - platforms:
      - ocp4
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: cluster
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc.git
            version: ">= 1.10.2"
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
    variables:
      - name: cluster_name
        moduleRef:
          id: cluster
          output: name
        type: string
        description: The name of the cluster
        default: ""
        optional: true
      - name: workers
        moduleRef:
          id: cluster
          output: workers
        type: list
        description: Number of worker nodes
      - name: worker_count
        moduleRef:
          id: cluster
          output: total_worker_count
        type: number
        description: Number of worker nodes
      - name: resource_group_name
        moduleRef:
          id: resource_group
          output: name
        type: string
        description: 'Resource Group in your account. List all available resource groups with: ibmcloud resource groups'
      - name: name_prefix
        scope: global
        type: string
        description: The prefix name for the service. If not provided it will default to the resource group name
        default: ""
        optional: true
      - name: region
        scope: global
        type: string
        description: 'The region Portworx will be installed in: us-south, us-east, eu-gb, eu-de, jp-tok, au-syd, etc..'
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: Get the ibmcloud api key from https://cloud.ibm.com/iam/apikeys
      - name: provision
        type: string
        description: If set to true installs Portworx on the given cluster
        default: "true"
        optional: true
      - name: install_storage
        type: string
        description: If set to false does not install storage and attach the volumes to the worker nodes. Enabled by default
        default: "true"
        optional: true
      - name: storage_capacity
        type: number
        description: Storage capacity in GBs
        default: 200
        optional: true
      - name: storage_iops
        type: number
        description: This is used only if a user provides a custom storage_profile
        default: 10
        optional: true
      - name: storage_profile
        type: string
        description: The is the storage profile used for creating storage
        default: 10iops-tier
        optional: true
      - name: create_external_etcd
        type: bool
        description: Do you want to create an external_etcd? `True` or `False`
        default: false
        optional: true
      - name: etcd_members_cpu_allocation_count
        type: number
        default: 9
        optional: true
      - name: etcd_members_disk_allocation_mb
        type: number
        default: 393216
        optional: true
      - name: etcd_members_memory_allocation_mb
        type: number
        default: 24576
        optional: true
      - name: etcd_plan
        type: string
        default: standard
        optional: true
      - name: etcd_version
        type: string
        default: "3.3"
        optional: true
      - name: etcd_service_endpoints
        type: string
        default: private
        optional: true
      - name: etcd_username
        type: string
        default: portworxuser
        optional: true
      - name: etcd_password
        type: string
        default: etcdpassword123
        optional: true
      - name: etcd_secret_name
        type: string
    version: v1.0.2
  - platforms:
      - ocp4
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: cluster
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc.git
            version: ">= 1.10.2"
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
    variables:
      - name: cluster_name
        moduleRef:
          id: cluster
          output: name
        type: string
        description: The name of the cluster
        default: ""
        optional: true
      - name: workers
        moduleRef:
          id: cluster
          output: workers
        type: list
        description: Number of worker nodes
      - name: resource_group_name
        moduleRef:
          id: resource_group
          output: name
        type: string
        description: 'Resource Group in your account. List all available resource groups with: ibmcloud resource groups'
      - name: name_prefix
        scope: global
        type: string
        description: The prefix name for the service. If not provided it will default to the resource group name
        default: ""
        optional: true
      - name: region
        scope: global
        type: string
        description: 'The region Portworx will be installed in: us-south, us-east, eu-gb, eu-de, jp-tok, au-syd, etc..'
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: Get the ibmcloud api key from https://cloud.ibm.com/iam/apikeys
      - name: provision
        type: string
        description: If set to true installs Portworx on the given cluster
        default: "true"
        optional: true
      - name: install_storage
        type: string
        description: If set to false does not install storage and attach the volumes to the worker nodes. Enabled by default
        default: "true"
        optional: true
      - name: storage_capacity
        type: number
        description: Storage capacity in GBs
        default: 200
        optional: true
      - name: storage_iops
        type: number
        description: This is used only if a user provides a custom storage_profile
        default: 10
        optional: true
      - name: storage_profile
        type: string
        description: The is the storage profile used for creating storage
        default: 10iops-tier
        optional: true
      - name: worker_count
        type: number
        description: Number of worker nodes
      - name: create_external_etcd
        type: bool
        description: Do you want to create an external_etcd? `True` or `False`
        default: false
        optional: true
      - name: etcd_members_cpu_allocation_count
        type: number
        default: 9
        optional: true
      - name: etcd_members_disk_allocation_mb
        type: number
        default: 393216
        optional: true
      - name: etcd_members_memory_allocation_mb
        type: number
        default: 24576
        optional: true
      - name: etcd_plan
        type: string
        default: standard
        optional: true
      - name: etcd_version
        type: string
        default: "3.3"
        optional: true
      - name: etcd_service_endpoints
        type: string
        default: private
        optional: true
      - name: etcd_username
        type: string
        default: portworxuser
        optional: true
      - name: etcd_password
        type: string
        default: etcdpassword123
        optional: true
      - name: etcd_secret_name
        type: string
    version: v1.0.1
  - platforms:
      - ocp4
    providers:
      - name: ibm
        source: "ibm-cloud/ibm"
    dependencies:
      - id: cluster
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc.git
            version: ">= 1.10.2"
      - id: resource_group
        refs:
          - source: github.com/cloud-native-toolkit/terraform-ibm-resource-group
            version: ">= 1.0.0"
    variables:
      - name: cluster_name
        moduleRef:
          id: cluster
          output: name
        type: string
        description: The name of the cluster
        default: ""
        optional: true
      - name: workers
        moduleRef:
          id: cluster
          output: workers
        type: list
        description: Number of worker nodes
      - name: resource_group_name
        moduleRef:
          id: resource_group
          output: name
        type: string
        description: 'Resource Group in your account. List all available resource groups with: ibmcloud resource groups'
      - name: name_prefix
        scope: global
        type: string
        description: The prefix name for the service. If not provided it will default to the resource group name
        default: ""
        optional: true
      - name: region
        scope: global
        type: string
        description: 'The region Portworx will be installed in: us-south, us-east, eu-gb, eu-de, jp-tok, au-syd, etc..'
      - name: ibmcloud_api_key
        scope: global
        type: string
        description: Get the ibmcloud api key from https://cloud.ibm.com/iam/apikeys
      - name: provision
        type: string
        description: If set to true installs Portworx on the given cluster
        default: "true"
        optional: true
      - name: install_storage
        type: string
        description: If set to false does not install storage and attach the volumes to the worker nodes. Enabled by default
        default: "true"
        optional: true
      - name: storage_capacity
        type: number
        description: Storage capacity in GBs
        default: 200
        optional: true
      - name: storage_iops
        type: number
        description: This is used only if a user provides a custom storage_profile
        default: 10
        optional: true
      - name: storage_profile
        type: string
        description: The is the storage profile used for creating storage
        default: 10iops-tier
        optional: true
      - name: worker_count
        type: number
        description: Number of worker nodes
      - name: create_external_etcd
        type: bool
        description: Do you want to create an external_etcd? `True` or `False`
        default: false
        optional: true
      - name: etcd_members_cpu_allocation_count
        type: number
        default: 9
        optional: true
      - name: etcd_members_disk_allocation_mb
        type: number
        default: 393216
        optional: true
      - name: etcd_members_memory_allocation_mb
        type: number
        default: 24576
        optional: true
      - name: etcd_plan
        type: string
        default: standard
        optional: true
      - name: etcd_version
        type: string
        default: "3.3"
        optional: true
      - name: etcd_service_endpoints
        type: string
        default: private
        optional: true
      - name: etcd_username
        type: string
        default: portworxuser
        optional: true
      - name: etcd_password
        type: string
        default: etcdpassword123
        optional: true
      - name: etcd_secret_name
        type: string
    version: v1.0.0
